<div class="login-container">
  <div class="login-card">
    <!-- Header Section -->
    <div class="login-header">
      <div class="logo-section">
        <svg class="app-logo" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="32" cy="32" r="30" fill="url(#grad1)" stroke="#fff" stroke-width="2"/>
          <defs>
            <radialGradient id="grad1" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#a4508b"/>
              <stop offset="100%" stop-color="#3a1c71"/>
            </radialGradient>
          </defs>
          <!-- Trophy base -->
          <rect x="26" y="40" width="12" height="6" rx="2" fill="#fff" fill-opacity="0.8"/>
          <!-- Trophy cup -->
          <ellipse cx="32" cy="32" rx="10" ry="12" fill="#fff" fill-opacity="0.9"/>
          <!-- Handles -->
          <path d="M22 32 Q14 28 22 24" stroke="#fff" stroke-width="2" fill="none"/>
          <path d="M42 32 Q50 28 42 24" stroke="#fff" stroke-width="2" fill="none"/>
          <!-- Star -->
          <polygon points="32,26 33.8,30.2 38.4,30.6 34.8,33.4 36,38 32,35.2 28,38 29.2,33.4 25.6,30.6 30.2,30.2" fill="#a4508b"/>
        </svg>
        <h1 class="app-title">AthletaX</h1>
        <p class="app-tagline">One Platform | Every Sport | Every Athlete</p>
      </div>
      <h2 class="login-title">Welcome Back</h2>
      <p class="login-subtitle">
        Sign in and Enter to Excel
      </p>
    </div>

    <!-- Login Form -->
    <form class="login-form" (ngSubmit)="onLogin()" #loginForm="ngForm" autocomplete="off">
      <!-- Username Field -->
      <div class="form-group" [class.has-error]="!validation().username.valid && (validation().username.touched || formSubmitted())" [class.is-focused]="usernameFocused">
        <label for="username" class="form-label">
          <i class="pi pi-user field-icon"></i>
          <span class="label-text">Username<span class="required-indicator">*</span></span>
        </label>
        <div class="input-wrapper">
          <input
            id="username"
            type="text"            
            class="form-input"
            placeholder="Enter your username"
            [(ngModel)]="credentials().username"
            (ngModelChange)="onUsernameChange($event)"
            name="username"
            required
            autocomplete="off"
            (focus)="usernameFocused = true"
            (blur)="usernameFocused = false"
            [class.invalid]="!validation().username.valid && (validation().username.touched || formSubmitted())"
            [class.valid]="validation().username.valid && validation().username.touched"
          />          
          <i
            class="pi validation-icon"
            [ngClass]="{
              'pi-check-circle': validation().username.valid && validation().username.touched,
              'pi-exclamation-circle': !validation().username.valid && (validation().username.touched || formSubmitted()),
              'success': validation().username.valid && validation().username.touched,
              'error': !validation().username.valid && (validation().username.touched || formSubmitted())
            }"
          ></i>
        </div>
        <div
          class="error-message"
          *ngIf="!validation().username.valid && (validation().username.touched || formSubmitted())"
        >
          <i class="pi pi-exclamation-triangle"></i>
          {{ validation().username.message }}
        </div>
      </div>

      <!-- Password Field -->
      <div class="form-group" [class.has-error]="!validation().password.valid && (validation().password.touched || formSubmitted())" [class.is-focused]="passwordFocused">
        <label for="password" class="form-label">
          <i class="pi pi-lock field-icon"></i>
          <span class="label-text">Password<span class="required-indicator">*</span></span>
        </label>
        <div class="password-wrapper">
          <input
            id="password"
            name="password"
            [type]="showPassword ? 'text' : 'password'"            
            class="form-input password-input"
            placeholder="Enter your password"
            [(ngModel)]="credentials().password"
            (ngModelChange)="onPasswordChange($event)"            
            required
            autocomplete="off"
            (focus)="passwordFocused = true"
            (blur)="passwordFocused = false"
            [class.invalid]="!validation().password.valid && (validation().password.touched || formSubmitted())"
            [class.valid]="validation().password.valid && validation().password.touched"
          />
          
          <button
            type="button"
            class="password-toggle"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'">
            <fa-icon [icon]="showPassword ? faEyeSlash : faEye"></fa-icon>
          </button>
          <i
            class="pi validation-icon password-validation-icon"
            [ngClass]="{
              'pi-check-circle': validation().password.valid && validation().password.touched,
              'pi-exclamation-circle': !validation().password.valid && (validation().password.touched || formSubmitted()),
              'success': validation().password.valid && validation().password.touched,
              'error': !validation().password.valid && (validation().password.touched || formSubmitted())
            }"
          ></i>
        </div>
        <div
          class="error-message"
          *ngIf="!validation().password.valid && (validation().password.touched || formSubmitted())">
          <i class="pi pi-exclamation-triangle"></i>
          {{ validation().password.message }}
        </div>
      </div>

      <!-- Remember Me & Forgot Password -->
      <div class="form-options">
        <div class="remember-me">
          <input
            id="rememberMe"
            type="checkbox"
            [(ngModel)]="rememberMe"
            name="rememberMe"
          />
          <label for="rememberMe">Remember me</label>
        </div>
        <button
          type="button"
          class="forgot-password-link"
          (click)="onForgotPassword()">
          Forgot password?
        </button>
      </div>
      <!-- Login Button -->
      <button
        type="submit"
        pButton
        class="login-button"
        [loading]="isLoading()"
        [disabled]="isLoading()"
        label="&nbsp;&nbsp;Sign In"
        icon="pi pi-sign-in"
        iconPos="left"
      ></button>
    </form>
    <!-- Footer -->
    <div class="login-footer">
      <p class="support-text">
        Need help?
        <button type="button" class="support-link" (click)="onContactSupport()">
          Contact Support
        </button>
      </p>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container">
    <div
      *ngFor="let toast of toastService.getToasts()()"
      class="toast"
      [ngClass]="'toast-' + toast.type"
    >
      <div class="toast-icon">
        <i
          class="pi"
          [ngClass]="
            toast.type === 'success' ? 'pi-check-circle' :
            toast.type === 'error' ? 'pi-times-circle' :
            toast.type === 'warning' ? 'pi-exclamation-triangle' :
            'pi-info-circle'
          "
        ></i>
      </div>
      <div class="toast-content">
        <div class="toast-title">{{ toast.title }}</div>
        <div class="toast-message">{{ toast.message }}</div>
      </div>
      <button
        class="toast-close"
        (click)="toastService.remove(toast.id)"
        type="button"
      >
        <i class="pi pi-times"></i>
      </button>
    </div>
  </div>
  
  <!-- Background Decoration -->
  <div class="background-decoration">
    <!-- Sports Equipment Floating Elements -->
    <div class="sports-element basketball">
      <div class="basketball-lines"></div>
    </div>
    <div class="sports-element tennis-ball">
      <div class="tennis-curve"></div>
    </div>
    <div class="sports-element volleyball">
      <div class="volleyball-panels"></div>
    </div>
    
    <!-- Football (Soccer ball) on the left -->
    <div class="sports-element football">
      <div class="football-pattern"></div>
    </div>
    
    <!-- Baseball on the left -->
    <div class="sports-element baseball">
      <div class="baseball-stitches"></div>
    </div>

    <!-- Athletic Track Pattern -->
    <div class="track-pattern track-1"></div>
    <div class="track-pattern track-2"></div>

    <!-- Goal Posts -->
    <div class="goal-post left-goal">
      <div class="goal-frame"></div>
    </div>
  </div>
</div>
