<!-- Modern Production-Ready Home Page -->
<div class="min-h-screen bg-white" [attr.data-theme]="'light'">
  <!-- Skip Links for Accessibility -->
  <a
    href="#main-content"
    class="sr-only-focusable focus-visible-enhanced"
    tabindex="1"
  >
    Skip to main content
  </a>

  <!-- Toast Notifications with ARIA Live Region -->
  <div aria-live="polite" aria-atomic="true" class="sr-only">
    <span *ngIf="isLoading()">Loading dashboard data</span>
    <span *ngIf="hasError()">{{ errorMessage() }}</span>
  </div>
  <p-toast
    position="top-right"
    [breakpoints]="{'640px': {width: '100%', right: '0px', left: '0px'}}"
  ></p-toast>
  <!-- Header Section -->
  <header
    class="sticky top-0 z-40 border-b border-gray-100 bg-white/95 shadow-sm backdrop-blur supports-[backdrop-filter]:bg-white/80"
    role="banner"
  >
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 items-center justify-between">
        <!-- Logo and Brand -->
        <div class="flex items-center space-x-3">
          <div
            class="focus-visible-enhanced flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-purple-600 to-indigo-700 shadow-md"
            role="img"
            aria-label="NXAcademy Logo"
          >
            <svg
              class="h-6 w-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"
              />
            </svg>
          </div>
          <div>
            <h1 class="text-lg font-bold text-gray-900">NXAcademy</h1>
            <p class="text-xs font-medium text-gray-500">
              Sports Management Portal
            </p>
          </div>
        </div>
        <!-- User Actions -->
        <div class="flex items-center space-x-3">
          <!-- Welcome Message -->
          <div class="hidden text-right sm:block">
            <p class="text-sm font-medium text-gray-900">Welcome back!</p>
            <p class="text-xs text-gray-500">Ready to manage your academy</p>
          </div>

          <!-- Profile/User Section -->
          <div class="flex items-center space-x-3">
            <!-- User Avatar -->
            <div
              class="flex h-10 w-10 cursor-pointer items-center justify-center rounded-full bg-gradient-to-br from-purple-600 to-indigo-700 text-white shadow-md transition-transform duration-150 hover:scale-105"
            >
              <i class="pi pi-user text-sm" aria-hidden="true"></i>
            </div>

            <!-- Sign Out Button -->
            <button
              (click)="onSignOut()"
              class="group focus-visible-enhanced inline-flex items-center space-x-2 rounded-lg bg-gray-50 px-3 py-2 text-sm font-medium text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-100 hover:shadow-md focus:bg-gray-100 focus:shadow-md"
              aria-label="Sign out of your account"
              type="button"
            >
              <i
                class="pi pi-sign-out text-gray-500 transition-colors group-hover:text-gray-700"
                aria-hidden="true"
              ></i>
              <span class="hidden sm:inline">Sign Out</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!-- Main Content -->
  <main
    id="main-content"
    class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"
    role="main"
  >
    <!-- Error State -->
    <div
      *ngIf="hasError() && !isLoading()"
      class="mb-8 rounded-lg border border-red-200 bg-red-50 p-6 text-center text-red-900"
      role="alert"
      aria-live="assertive"
    >
      <div class="flex flex-col items-center space-y-4">
        <i
          class="pi pi-exclamation-triangle text-3xl text-red-500"
          aria-hidden="true"
        ></i>
        <div>
          <h3 class="text-lg font-semibold">Unable to Load Dashboard</h3>
          <p class="text-sm">{{ errorMessage() }}</p>
        </div>
        <button
          (click)="retryLoadData()"
          class="focus-visible-enhanced inline-flex items-center space-x-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700"
          type="button"
          [attr.aria-label]="'Retry loading dashboard data, attempt ' + (retryCount() + 1)"
        >
          <i class="pi pi-refresh" aria-hidden="true"></i>
          <span>Retry Loading</span>
        </button>
      </div>
    </div>

    <!-- Welcome Section -->
    <section class="mb-12">
      <div class="text-center">
        <h2 class="text-3xl font-bold text-balance text-gray-900 sm:text-4xl">
          {{ welcomeMessage() }}
        </h2>
        <p class="mx-auto mt-4 max-w-2xl text-lg text-balance text-gray-600">
          Manage your sports academy with comprehensive tools for athletes,
          teams, and facilities.
        </p>
      </div>
    </section>
    <!-- Quick Actions -->
    <section class="mb-12" aria-labelledby="quick-actions-heading">
      <h3
        id="quick-actions-heading"
        class="mb-6 text-lg font-semibold text-gray-900"
      >
        Quick Actions
      </h3>

      <!-- Loading State for Quick Actions -->
      <div
        *ngIf="isLoading()"
        class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-2"
        role="list"
      >
        <div
          class="loading-shimmer h-48 rounded-2xl"
          aria-label="Loading quick action"
        ></div>
        <div
          class="loading-shimmer h-48 rounded-2xl"
          aria-label="Loading quick action"
        ></div>
      </div>

      <!-- Quick Actions Grid -->
      <div
        *ngIf="!isLoading()"
        class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-2"
        role="list"
      >
        <article
          *ngFor="let action of quickActions(); trackBy: trackByActionId"
          (click)="onQuickAction(action)"
          (keydown)="onKeyboardNavigation($event, action)"
          class="focus-visible-enhanced group hardware-accelerated relative cursor-pointer overflow-hidden rounded-2xl border border-gray-200 bg-white p-8 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-xl"
          [class.bg-gradient-to-br]="action.color === 'primary'"
          [class.from-purple-50]="action.color === 'primary'"
          [class.to-indigo-50]="action.color === 'primary'"
          [class.bg-gradient-to-br]="action.color === 'secondary'"
          [class.from-blue-50]="action.color === 'secondary'"
          [class.to-teal-50]="action.color === 'secondary'"
          tabindex="0"
          role="button"
          [attr.aria-label]="action.ariaLabel"
          [attr.aria-describedby]="'desc-' + action.id"
        >
          <!-- Icon -->
          <div class="mb-6 flex items-center justify-between">
            <div
              class="flex h-14 w-14 items-center justify-center rounded-xl shadow-sm transition-all duration-300 hover:scale-105 active:scale-95"
              [class.bg-purple-100]="action.color === 'primary'"
              [class.text-purple-600]="action.color === 'primary'"
              [class.bg-blue-100]="action.color === 'secondary'"
              [class.text-blue-600]="action.color === 'secondary'"
            >
              <i
                class="pi text-2xl"
                [class]="action.icon"
                aria-hidden="true"
              ></i>
            </div>
            <span
              class="status-indicator rounded-full px-3 py-1 text-sm font-medium"
              [class.bg-purple-100]="action.color === 'primary'"
              [class.text-purple-700]="action.color === 'primary'"
              [class.bg-blue-100]="action.color === 'secondary'"
              [class.text-blue-700]="action.color === 'secondary'"
            >
              {{ action.metrics }}
            </span>
          </div>

          <!-- Content -->
          <div [id]="'desc-' + action.id">
            <h4
              class="mb-2 text-xl font-semibold text-gray-900 transition-colors group-hover:text-gray-700"
            >
              {{ action.title }}
            </h4>
            <p class="mb-4 text-sm leading-relaxed text-gray-600">
              {{ action.description }}
            </p>

            <!-- Action indicator -->
            <div
              class="flex items-center text-sm font-medium transition-colors"
              [class.text-purple-600]="action.color === 'primary'"
              [class.text-blue-600]="action.color === 'secondary'"
            >
              <span>Open {{ action.title }}</span>
              <i
                class="pi pi-arrow-right ml-2 text-xs transition-transform group-hover:translate-x-1"
                aria-hidden="true"
              ></i>
            </div>
          </div>
        </article>
      </div>
    </section>
    <!-- Metrics Overview -->
    <section class="mb-12" aria-labelledby="metrics-heading">
      <div class="mb-6 flex items-center justify-between">
        <h3 id="metrics-heading" class="text-lg font-semibold text-gray-900">
          Academy Overview
        </h3>
        <div
          *ngIf="isLoading()"
          class="flex items-center space-x-2 text-sm text-gray-500"
          aria-live="polite"
        >
          <svg
            class="h-4 w-4 animate-pulse"
            fill="none"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
          <span>Loading data...</span>
        </div>
      </div>

      <!-- Loading State for Metrics -->
      <div
        *ngIf="isLoading()"
        class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"
      >
        <div
          class="loading-shimmer h-24 rounded-xl"
          aria-label="Loading metric card"
        ></div>
        <div
          class="loading-shimmer h-24 rounded-xl"
          aria-label="Loading metric card"
        ></div>
        <div
          class="loading-shimmer h-24 rounded-xl"
          aria-label="Loading metric card"
        ></div>
        <div
          class="loading-shimmer h-24 rounded-xl"
          aria-label="Loading metric card"
        ></div>
      </div>

      <!-- Metrics Grid -->
      <div
        *ngIf="!isLoading()"
        class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"
        role="list"
      >
        <!-- Total Players -->
        <article
          class="content-visibility-auto overflow-hidden rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"
          role="listitem"
        >
          <div class="flex items-center">
            <div
              class="flex h-12 w-12 items-center justify-center rounded-lg bg-green-100"
              role="img"
              aria-label="Players icon"
            >
              <i
                class="pi pi-users text-xl text-green-600"
                aria-hidden="true"
              ></i>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Total Players</p>
              <p class="text-2xl font-bold text-gray-900" aria-live="polite">
                {{ isLoading() ? '---' : metrics().totalPlayers.toLocaleString()
                }}
              </p>
            </div>
          </div>
        </article>
        <!-- Active Teams -->
        <article
          class="content-visibility-auto overflow-hidden rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"
          role="listitem"
        >
          <div class="flex items-center">
            <div
              class="flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100"
              role="img"
              aria-label="Teams icon"
            >
              <i
                class="pi pi-sitemap text-xl text-orange-600"
                aria-hidden="true"
              ></i>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Active Teams</p>
              <p class="text-2xl font-bold text-gray-900" aria-live="polite">
                {{ isLoading() ? '--' : metrics().activeTeams }}
              </p>
            </div>
          </div>
        </article>
        <!-- Active Branches -->
        <article
          class="content-visibility-auto overflow-hidden rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"
          role="listitem"
        >
          <div class="flex items-center">
            <div
              class="flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100"
              role="img"
              aria-label="Branches icon"
            >
              <i
                class="pi pi-building text-xl text-blue-600"
                aria-hidden="true"
              ></i>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Active Branches</p>
              <p class="text-2xl font-bold text-gray-900" aria-live="polite">
                {{ metrics().activeBranches }}
              </p>
            </div>
          </div>
        </article>
        <!-- Sports Offered -->
        <article
          class="content-visibility-auto overflow-hidden rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"
          role="listitem"
        >
          <div class="flex items-center">
            <div
              class="flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100"
              role="img"
              aria-label="Sports icon"
            >
              <i
                class="pi pi-star text-xl text-purple-600"
                aria-hidden="true"
              ></i>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Sports Offered</p>
              <p class="text-2xl font-bold text-gray-900" aria-live="polite">
                {{ isLoading() ? '--' : metrics().sportsOffered }}
              </p>
            </div>
          </div>
        </article>
      </div>
    </section>
  </main>
  <!-- Footer -->
  <footer class="no-print border-t border-gray-200 bg-white" role="contentinfo">
    <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
      <div class="text-center text-sm text-gray-500">
        © {{ currentTime() | date:'yyyy' }} NXAcademy. Excellence in Sports
        Education.
        <span class="sr-only">All rights reserved.</span>
      </div>
    </div>
  </footer>
</div>
